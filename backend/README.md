# Backend ‚Äî Task Manager

Backend-—á–∞—Å—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ –≤ –∫–æ–º–∞–Ω–¥–µ.

## –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç REST API –¥–ª—è:

- —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞–º–∏ –∑–∞–¥–∞—á
- –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–¥–∞—á –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º
- —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–µ–¥–ª–∞–π–Ω–æ–≤ –¥–ª—è –∑–∞–¥–∞—á
- –æ—Ç–º–µ—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
- –ø—Ä–∏–≤—è–∑–∫–∏ Telegram-–∞–∫–∫–∞—É–Ω—Ç–∞ –¥–ª—è –±—É–¥—É—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –±–æ—Ç–æ–º
- –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äî —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–µ—Å—Å–∏–∏ Django (–∞–¥–º–∏–Ω–∫–∞)
- –ø—Ä–∏–≤—è–∑–∫–∞ Telegram —á–µ—Ä–µ–∑ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Django, Django REST Framework

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash

# –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/tatitrif/task_manager.git

# –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
cd task_manager/backend

# –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ .env (–ø—Ä–∏–º–µ—Ä –≤ .env.example)
cp .env.example .env

# —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π SECRET_KEY
python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"

# —Å–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
uv run python manage.py makemigrations tasks accounts

# –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
uv run python manage.py migrate

# —Å–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
uv run python manage.py createsuperuser

# –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
uv run python manage.py runserver

# –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–∞–∫—à–Ω
uv sync
uvicorn config.asgi:application --host 127.0.0.1 --port 8000
```

> `--log-level debug` `--reload`

### –ó–∞–ø—É—Å–∫ Celery –≤ Django

1. –ó–∞–ø—É—Å—Ç–∏ **Redis** (–µ—Å–ª–∏ —á–µ—Ä–µ–∑ Docker):

```
docker run -d -p 6379:6379 redis
```

2. –ó–∞–ø—É—Å—Ç–∏ **Celery worker**:

```
celery -A config worker -l info
```

- <i>Windows-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏</i> –Ω–∞ multiprocessing (billiard) ‚Äî Celery –Ω–∞ Windows –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `prefork` (–º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω—ã–π) –ø—É–ª
  –ó–∞–ø—É—Å–∫–∞–π Celery —Å –ø—É–ª–æ–º `solo` ‚Äî –æ–Ω –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π, –Ω–æ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:

  ```
  celery -A config worker -l info --pool=solo
  ```

  > üí° –≠—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ Windows. –ù–∞ Linux/macOS —Ä–∞–±–æ—Ç–∞–µ—Ç `prefork`, –Ω–æ –ø–æ–¥ Windows –Ω—É–∂–Ω–æ `--pool=solo`.

  - –ó–∞–ø—É—Å–∫–∞–π Celery —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é:

    ```
    celery -A config worker -l info --pool=threads -c 4
    ```

    –≠—Ç–æ –¥–∞—Å—Ç 4 –ø–æ—Ç–æ–∫–∞ –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–±—ã—Å—Ç—Ä–µ–µ, —á–µ–º solo, –Ω–æ –±–µ–∑ multiprocessing).

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ **Celery Beat** (–¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á):

```
celery -A config beat --loglevel=info
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `app/` - –ø—Ä–æ–µ–∫—Ç ...
  - `api/` - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä—É—á–µr
  - `core/` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ pydantic
  - `notify/` - –†–∞–±–æ—Ç–∞ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
  - `tasks/` - –õ–æ–≥–∏–∫–∞ –∑–∞–¥–∞—á –∏ —Å–ø–∏—Å–∫–æ–≤
  - `manage.py` - —Ç–æ—á–∫–∞ –∑–∞–ø—É—Å–∫–∞
  - `pyproject.tom` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è Django
  - `README.md` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–µ—Ç–µ —Å backend

## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–≤—è–∑–∫–∏ Telegram

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–∏–≤—è–∑–∫—É Telegram-–∞–∫–∫–∞—É–Ω—Ç–∞ –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è endpoint, –∫–æ—Ç–æ—Ä—ã–π
   - —Å—Å—ã–ª–∫—É –Ω–∞ Telegram-–±–æ—Ç —Å **–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–º —Ç–æ–∫–µ–Ω–æ–º** –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –∏–ª–∏
   - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç **–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π —Ç–æ–∫–µ–Ω** –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**
   - –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ ‚Üí Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É /start <token> –∏–ª–∏
   - –∫–æ–ø–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ `/start <—Ç–æ–∫–µ–Ω>`
3. –í –æ—Ç–≤–µ—Ç **Telegram-–±–æ—Ç** –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω –∏ telegram_id, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç –ø–æ–¥—Ç–≤–µ–∂–¥–µ–Ω–∏—è
4. **–°–µ—Ä–≤–µ—Ä**:
   - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ telegram_id –∏–ª–∏ –æ—à–∏–±–∫—É
   - –ø–æ—Å–ª–µ –ø—Ä–∏–≤—è–∑–∫–∏ –±–æ—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å telegram_id –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±—É–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
